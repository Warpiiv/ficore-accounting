import logging
from flask import has_request_context, session
import os

logger = logging.getLogger(__name__)

TRANSLATIONS = {
    'en': {
        # Setup
        'database_setup_success': 'Database setup completed successfully',
        'database_setup_error': 'Database setup failed',
        'complete_business_setup': 'Complete Business Setup',
        'provide_business_details': 'Please provide your business details to complete the setup.',
        'business_name': 'Business Name',
        'business_address': 'Business Address',
        'user_details': 'User Details',
        'business_details': 'Business Details',
        'update_profile': 'Update Profile',
        'no_business_details': 'No business details provided yet. Complete setup to add them.',
        'invalid_email': 'Please enter a valid email',
        'required_field': 'This field is required',
        'save': 'Save',
        'go_to_home': 'Go to Home',
        'go_to_general_dashboard': 'Go to General Dashboard',
        'industry': 'Industry',
        'retail': 'Retail',
        'services': 'Services',
        'manufacturing': 'Manufacturing',
        'other': 'Other',
        'save_and_continue': 'Save and Continue',
        'business_setup_completed_successfully': 'Business setup completed successfully!',
        'Username': 'Username',
        'username': 'Username',
        'Username is required': 'Username is required',
        'Username must be between 3 and 50 characters': 'Username must be between 3 and 50 characters',
        'Username must be alphanumeric with underscores': 'Username must be alphanumeric with underscores',
        'Password': 'Password',
        'password': 'Password',
        'Password is required': 'Password is required',
        'Password must be at least 8 characters': 'Password must be at least 8 characters',
        'Email': 'Email',
        'email': 'Email',
        'Email is required': 'Email is required',
        'Invalid email address': 'Invalid email address',
        'Confirm Password': 'Confirm Password',
        'confirm_password': 'Confirm Password',
        'Confirm password is required': 'Confirm password is required',
        'Passwords must match': 'Passwords must match',
        'Display Name': 'Display Name',
        'display_name': 'Display Name',
        'Display Name is required': 'Display Name is required',
        'Display Name must be between 3 and 50 characters': 'Display Name must be between 3 and 50 characters',
        'core_records_logo': 'Ficore Records Logo',
        'core_change_language': 'Change Language',
        'core_switch_to': 'Switch to',
        'core_toggle_dark_mode': 'Toggle Dark Mode',
        'core_main_menu': 'Main Menu',
        'core_home': 'Home',
        'general_dashboard': 'General Dashboard',
        'core_account': 'Account',
        'core_login': 'Login',
        'core_signup': 'Signup',
        'core_about_records': 'About Ficore Records',
        'core_connect_on_linkedin': 'Connect on LinkedIn',
        'core_follow_on_twitter': 'Follow on Twitter',
        'core_follow_on_facebook': 'Follow on Facebook',
        'core_contact_us': 'Contact Us',
        'core_provide_feedback': 'Provide Feedback',
        'core_close': 'Close',
        'core_logout': 'Logout',
        'core_profile': 'Profile',
        'tool_invoices': 'Invoices',
        'tool_transactions': 'Transactions',
        'tool_profile': 'Profile',
        'dashboard_title': 'Dashboard',
        'admin_dashboard_title': 'Admin Dashboard',
        'all_invoices': 'All Invoices',
        'all_transactions': 'All Transactions',
        'login_required': 'Please log in to view your dashboard.',
        'login': 'Log In',
        # Module: Invoice
        'invoice_details': 'Invoice Details',
        'are_you_sure_delete_invoice': 'Are you sure you want to delete this invoice?',
        'invoice_number': 'Invoice Number',
        'customer_name': 'Customer Name',
        'amount': 'Amount (₦)',
        'status': 'Status',
        'actions': 'Actions',
        'no_invoices': 'No invoices found',
        'edit': 'Edit',
        'delete': 'Delete',
        'confirm_delete': 'Are you sure?',
        # Module: Transaction
        'track_transaction': 'Track Transaction',
        'transaction_details': 'Transaction Details',
        'are_you_sure_delete_transaction': 'Are you sure you want to delete this transaction?',
        'go_to_transactions': 'Go to Transactions',
        'filter_by_date': 'Filter by Date',
        'filter_by_category': 'Filter by Category',
        'filter_by_description': 'Filter by Description',
        'add_transaction': 'Add Transaction',
        'go_to_dashboard': 'Go to Dashboard',
        'type': 'Type',
        'category': 'Category',
        'description': 'Description',
        'no_transactions': 'No transactions found',
        # Module: Core
        'core_helping_african_smes': 'Helping African SMEs simplify records and grow financially.',
        'core_please_complete_all_records': 'Please ensure all records are complete and accurate.',
        'go_to_invoices': 'Go to Invoices',
        'core_toggle_menu': 'Toggle Menu',
        'core_invoices': 'Invoices',
        'core_cancel': 'Cancel',
        'core_invoice': 'Create Invoice',
        'add_transactions': 'Transactions',
        'view_invoices': 'View Invoices',
        'view_transactions': 'View Transactions',
        'created_at': 'Created At',
        'pending': 'Pending',
        'settled': 'Settled',
        'balance_summary': 'Balance Summary',
        'total_income': 'Total Income',
        'total_expense': 'Total Expenses',
        'net_balance': 'Net Balance',
        'category_totals': 'Category Totals',
        'filter_date': 'Filter by Date',
        'all_categories': 'All Categories',
        'filter_description': 'Filter by Description',
        'filter_tags': 'Filter by Tags',
        'filter': 'Filter',
        'all': 'All',
        'start_date': 'Start Date',
        'end_date': 'End Date',
        'export_csv': 'Export to CSV',
        'tags': 'Tags',
        'tags_placeholder': 'Enter tags, separated by commas',
        'recurring': 'Recurring Transaction',
        'recurring_period': 'Recurring Period',
        'expense': 'Expense',
        'income': 'Income',
        'money_in': 'Money In',
        'money_out': 'Money Out',
        'sales': 'Sales',
        'utilities': 'Utilities',
        'transport': 'Transport',
        'none': 'None',
        'weekly': 'Weekly',
        'monthly': 'Monthly',
        'yearly': 'Yearly',
        'transaction_added': 'Transaction added successfully',
        'transaction_updated': 'Transaction updated successfully',
        'transaction_deleted': 'Transaction deleted successfully',
        'transaction_not_found': 'Transaction not found',
        'create_invoice': 'Create Invoice',
        'edit_invoice': 'Edit Invoice',
        'invoice_created': 'Invoice created successfully',
        'invoice_updated': 'Invoice updated successfully',
        'invoice_deleted': 'Invoice deleted successfully',
        'invoice_not_found': 'Invoice not found',
        'core_something_went_wrong': 'An error occurred, please try again',
        'invalid_date_format': 'Invalid date format',
        'invalid_amount': 'Amount must be greater than zero',
        'tags_too_long': 'Tags cannot exceed 200 characters',
        'language_updated': 'Language updated successfully',
        'invalid_language': 'Invalid language selected',
        'feedback_success': 'Feedback submitted successfully',
        'feedback_error': 'Error submitting feedback',
        'invalid_tool': 'Invalid tool selected',
        'invalid_rating': 'Invalid rating provided',
        'forbidden': 'Forbidden',
        'page_not_found': 'Page not found',
        'internal_server_error': 'Internal server error',
        'error_saving': 'Error saving invoice',
        'something_went_wrong': 'Something went wrong',
        'invoices': 'Invoices',
        # Auth
        'invalid_username': 'Username must be at least 3 characters long',
        'invalid_password': 'Password must be at least 8 characters long',
        'user_exists': 'Username or email already exists',
        'signup_success': 'Account created successfully',
        'signup_error': 'Error creating account. Please try again',
        'email_not_found': 'Email not found',
        'reset_email_sent': 'Password reset email sent. Check your inbox',
        'reset_email_failed': 'Failed to send reset email. Please try again',
        'forgot_password_error': 'Error processing request. Please try again',
        'reset_password_subject': 'Password Reset Request for Ficore Records',
        'reset_password_body': 'Click the link below to reset your password:',
        'reset_password_expiry': 'This link expires in 1 hour',
        'password_mismatch': 'Passwords do not match',
        'invalid_or_expired_token': 'Invalid or expired reset token',
        'reset_password_success': 'Password reset successfully',
        'reset_password_error': 'Error resetting password. Please try again',
        'already_have_account': 'Already have an account? Sign In',
        'back_to_signin': 'Back to Sign In',
        'create_account': 'Create an Account',
        'forgot_password': 'Forgot Password',
        'invalid_credentials': 'Invalid credentials',
        'logged_in': 'Logged in successfully',
        'logged_out': 'Logged out successfully',
        'new_password': 'New Password',
        'reset_password': 'Reset Password',
        'user_id': 'User ID',
        'username_exists': 'Username already exists',
        'email_exists': 'Email already exists',
        'profile_updated': 'Profile updated successfully',
        'user_not_found': 'User not found',
        'invalid_username_format': 'Invalid username format',
        'invalid_email_domain': 'Invalid email domain',
        # General
        'about_description': 'Ficore Records is a simplified software designed to empower small and medium enterprises (SMEs) across Africa with efficient financial record-keeping. Since 2025, we have been committed to making financial management accessible and intuitive.',
        'about_mission': 'Our mission is to provide SMEs with tools to streamline invoicing, track transactions, and manage profiles, all while maintaining simplicity and affordability.',
        'choose_option': 'Choose...',
        'comment': 'Comment',
        'core_accept': 'Accept',
        'core_back_to_home': 'Back to Home',
        'core_book_consultancy': 'Book Consultancy',
        'core_disclaimer_records': 'Ficore Records is a simplified software for SMEs.',
        'core_empowering_financial_management': 'Empowering financial record-keeping across Africa since 2025',
        'core_error_acknowledging_consent': 'Error acknowledging consent. Please try again.',
        'core_internal_server_error': 'Internal Server Error',
        'core_invalid_request': 'Invalid request. Please try again.',
        'core_join_waitlist': 'Join Waitlist',
        'core_learn_more': 'Learn more',
        'core_network_error': 'Network error. Please try again.',
        'core_page_not_found': 'Page Not Found',
        'core_page_not_found_message': 'The page you are looking for does not exist.',
        'core_please_complete_all_fields': 'Please complete all required fields correctly',
        'core_return_to_home': 'Return to Home',
        'core_toggle_navigation': 'Toggle Navigation',
        'core_welcome_to_records': 'Track Your Business, Make Good Decisions!',
        'rating': 'Rating (1-5)',
        'select_tool': 'Select Tool',
        'submit': 'Submit',
        'welcome': 'Welcome to Ficore Records',
        'home': 'Home',
        'invoices_desc': 'See and Track your Invoices here',
        'transactions_desc': 'See and Track the Record of your transactions',
        'feedback': 'Provide Feedback',
        'feedback_desc': 'Share your thoughts on the app',
        # Dashboard
        'admin_dashboard': 'Admin Dashboard',
        'admin_dashboard_desc': 'Manage users and settings',
        'admin_overview': 'Admin Overview',
        'admin_welcome': 'Welcome to the Admin Dashboard. Manage users, invoices, and transactions below.',
        'dashboard_summary': 'View your recent invoices, transactions, and profile information below.',
        'dashboard_welcome': 'Welcome to Your Dashboard',
        'invoice': 'Invoice',
        'recent_invoices': 'Recent Invoices',
        'recent_transactions': 'Recent Transactions',
        'total_invoices': 'Total Invoices',
        'total_transactions': 'Total Transactions',
        'total_users': 'Total Users',
        'transaction': 'Transaction',
        'view_all_invoices': 'View All Invoices',
        'view_all_transactions': 'View All Transactions',
        'general_dashboard_desc': 'View a summary of all your financial records and activities here.',
        'create_invoice_desc': 'Create and manage new invoices for your clients.',
        'add_transaction_desc': 'Add new transactions like income and expenses to track your cash flow.',
        # Consent Banner
        'core_consent_banner_records': 'By using Ficore Records, you understand that we provide tools for planning only, not banking.',
        # Error Handling
        'forbidden_access': 'Access denied',
        'database_setup_disabled': 'Database setup disabled in production',
        # Module: Coins
        'coin_amount': 'Coin Amount',
        'payment_method': 'Payment Method',
        'card': 'Credit/Debit Card',
        'bank': 'Bank Transfer',
        'purchase': 'Purchase',
        'purchase_success': 'Coins purchased successfully',
        'coin_balance': 'Coin Balance',
        'coin_history': 'Coin Transaction History',
        'credit_coins': 'Credit Coins',
        'credit_success': 'Coins credited successfully',
        'date': 'Date',
        'ref': 'Reference',
        'unpaid': 'Unpaid',
        'part_paid': 'Part Paid',
        'paid': 'Paid',
        'due_date': 'Due Date',
        'overdue': 'Overdue',
        'party_name': 'Party Name',
        'create_debtor': 'Create Debtor',
        'create_creditor': 'Create Creditor',
        'debtors': 'Debtors',
        'creditors': 'Creditors',
        'no_debtors': 'No debtors found',
        'no_creditors': 'No creditors found',
        'total': 'Total',
        'receipts': 'Receipts',
        'payments': 'Payments',
        'no_receipts': 'No receipts found',
        'no_payments': 'No payments found',
        'add_receipt': 'Add Receipt',
        'add_payment': 'Add Payment',
        'inventory': 'Inventory',
        'add_inventory': 'Add Inventory Item',
        'edit_inventory': 'Edit Inventory Item',
        'no_inventory': 'No inventory items found',
        'item_name': 'Item Name',
        'quantity': 'Quantity',
        'unit': 'Unit',
        'buying_price': 'Buying Price',
        'selling_price': 'Selling Price',
        'threshold': 'Low Stock Threshold',
        'back_to_inventory': 'Back to Inventory',
        'add_item': 'Add Item',
        'low_stock': 'Low Stock',
        'yes': 'Yes',
        'no': 'No',
        'user_suspended': 'User suspended successfully',
        'user_deleted': 'User deleted successfully',
        'item_deleted': 'Item deleted successfully',
        'invalid_collection': 'Invalid collection'
    },
    'ha': {
        # Setup
        'database_setup_success': 'An kammala saitin bayanai cikin nasara',
        'database_setup_error': 'Kuskure wajen saitin bayanai. Sake gwadawa',
        'complete_business_setup': 'Kammalawa Sashen Kasuwanci',
        'provide_business_details': 'Da fatan a ba da bayanan kasuwancin ku don kammala saitin.',
        'business_name': 'Sunan Kasuwanci',
        'business_address': 'Adreshin Kasuwanci',
        'user_details': 'Bayanan Mai Amfani',
        'business_details': 'Bayanan Kasuwanci',
        'update_profile': 'Sabunta Bayanan',
        'no_business_details': 'Babu bayanan kasuwanci har yanzu. Kammala saiti don ƙara su.',
        'invalid_email': 'Da fatan a saka ingantaccen imel',
        'required_field': 'Wannan filin yana da buƙata',
        'save': 'Ajiye',
        'go_to_home': 'Tafi Gida',
        'go_to_general_dashboard': 'Tafi Babban Dashboard',
        'industry': 'Masana\'antu',
        'retail': 'Dillali',
        'services': 'Ayyuka',
        'manufacturing': 'Masana\'antu',
        'other': 'Sauran',
        'save_and_continue': 'Ajiye kuma Ci gaba',
        'business_setup_completed_successfully': 'An kammala saitin kasuwanci cikin nasara!',
        'Username': 'Sunan Mai Amfani',
        'username': 'Sunan Mai Amfani',
        'Username is required': 'Ana buƙatar Sunan Mai Amfani',
        'Username must be between 3 and 50 characters': 'Sunan Mai Amfani dole ne ya kasance tsakanin 3 da 50 haruffa',
        'Username must be alphanumeric with underscores': 'Sunan Mai Amfani dole ne ya kasance alphanumeric tare da alamu na ƙasa',
        'Password': 'Kalmar Sirri',
        'password': 'Kalmar Sirri',
        'Password is required': 'Ana buƙatar Kalmar Sirri',
        'Password must be at least 8 characters': 'Kalmar Sirri dole ne ta kasance aƙalla 8 haruffa',
        'Email': 'Imel',
        'email': 'Imel',
        'Email is required': 'Ana buƙatar Imel',
        'Invalid email address': 'Adireshin Imel mara inganci',
        'Confirm Password': 'Tabbatar da Kalmar Sirri',
        'confirm_password': 'Tabbatar da Kalmar Sirri',
        'Confirm password is required': 'Ana buƙatar Tabbatar da Kalmar Sirri',
        'Passwords must match': 'Kalaman Sirri dole ne su yi daidai',
        'Display Name': 'Sunan Nuni',
        'display_name': 'Sunan Nuni',
        'Display Name is required': 'Ana buƙatar Sunan Nuni',
        'Display Name must be between 3 and 50 characters': 'Sunan Nuni dole ne ya kasance tsakanin 3 da 50 haruffa',
        'core_records_logo': 'Logo na Ficore Records',
        'core_change_language': 'Canza Harshe',
        'core_switch_to': 'Canza zuwa',
        'core_toggle_dark_mode': 'Canza zuwa Mode Duhu',
        'core_main_menu': 'Babban Menu',
        'core_home': 'Gida',
        'general_dashboard': 'Babban Dashboard',
        'core_account': 'Asusun',
        'core_login': 'Shiga',
        'core_signup': 'Yi Rajista',
        'core_about_records': 'Game da Ficore Records',
        'core_connect_on_linkedin': 'Haɗu da mu akan LinkedIn',
        'core_follow_on_twitter': 'Biyi mu akan Twitter',
        'core_follow_on_facebook': 'Biyi mu akan Facebook',
        'core_contact_us': 'Tuntube Mu',
        'core_provide_feedback': 'Bayar da Ra’ayi',
        'core_close': 'Rufe',
        'core_logout': 'Fita',
        'core_profile': 'Bayanan Martaba',
        'tool_invoices': 'Lissafin Kuɗi',
        'tool_transactions': 'Ma\'amaloli',
        'tool_profile': 'Bayanan Martaba',
        'dashboard_title': 'Dashboard',
        'admin_dashboard_title': 'Dashboard na Admin',
        'all_invoices': 'Duk Lissafin Kuɗi',
        'all_transactions': 'Duk Ma\'amaloli',
        'login_required': 'Don Allah shiga don duba dashboard naka.',
        'login': 'Shiga',
        # Module: Invoice
        'invoice_details': 'Bayanin Takardun Jira',
        'are_you_sure_delete_invoice': 'Kana da tabbacin kana son share wannan Takardar?',
        'invoice_number': 'Lambar Takardar Jira',
        'customer_name': 'Sunan Abokin Ciniki',
        'amount': 'Adadin Kuɗi (₦)',
        'status': 'Matsayi',
        'actions': 'Ayyuka',
        'no_invoices': 'Ba a sami lissafin kuɗi ba',
        'edit': 'Gyara',
        'delete': 'Share',
        'confirm_delete': 'Ka tabbata?',
        # Module: Transaction
        'track_transaction': 'Bibiyar Ma\'amala',
        'transaction_details': 'Bayanin Ma\'amala',
        'are_you_sure_delete_transaction': 'Kana da tabbacin kana son share wannan ma\'amala?',
        'go_to_transactions': 'Je zuwa Ma\'amaloli',
        'filter_by_date': 'Tace ta Kwanan Wata',
        'filter_by_category': 'Tace ta Rukuni',
        'filter_by_description': 'Tace ta Bayani',
        'add_transaction': 'Ƙara Ma\'amala',
        'go_to_dashboard': 'Je zuwa Dashboard',
        'type': 'Nau\'i',
        'category': 'Rukuni',
        'description': 'Bayani',
        'no_transactions': 'Babu ma\'amaloli da aka samu',
        # Module: Core
        'core_helping_african_smes': 'Taimaka wa Ƙanana Masana\'antu na Afirka wajen sauƙaƙe rajista da haɓaka kuɗi.',
        'core_please_complete_all_records': 'Don Allah tabbatar da cewa duk bayanan sun cika kuma suna da inganci.',
        'go_to_invoices': 'Je zuwa Takardar Jira',
        'core_toggle_menu': 'Canja Menu',
        'core_invoices': 'Takardun Kudi',
        'core_cancel': 'Soke',
        'core_invoice': 'Ƙirƙiri Takardar Jira',
        'add_transactions': 'Ma\'amaloli',
        'view_invoices': 'Takardun Jira',
        'view_transactions': 'Lissafin Ma\'amala',
        'created_at': 'An Ƙirƙira Shi a',
        'pending': 'Mai Jiran Gado',
        'settled': 'An Sasanta',
        'balance_summary': 'Taƙaitaccen Ma\'auni',
        'total_income': 'Jimlar Kuɗin Shiga',
        'total_expense': 'Jimlar Kuɗin Fita',
        'net_balance': 'Ma\'auni Na Gaskiya',
        'category_totals': 'Jimlar Rukunoni',
        'filter_date': 'Tace da Kwanan Wata',
        'all_categories': 'Duk Rukunoni',
        'filter_description': 'Tace da Bayani',
        'filter_tags': 'Tace da Alamomi',
        'filter': 'Tace',
        'all': 'Duk',
        'start_date': 'Ranar Farawa',
        'end_date': 'Ranar Ƙarewa',
        'export_csv': 'Fitarwa zuwa CSV',
        'tags': 'Alamomi',
        'tags_placeholder': 'Shigar da alamomi, raba da wakafi',
        'recurring': 'Ma\'amala Mai Maimaitawa',
        'recurring_period': 'Lokacin Maimaitawa',
        'expense': 'Kuɗin Fita',
        'income': 'Kuɗin Shiga',
        'money_in': 'Kuɗi Shiga',
        'money_out': 'Kuɗi Fita',
        'sales': 'Sayarwa',
        'utilities': 'Abubuwan Amfani',
        'transport': 'Sufuri',
        'none': 'Babu',
        'weekly': 'Mako-Mako',
        'monthly': 'Wata-Wata',
        'yearly': 'Shekara-Shekara',
        'transaction_added': 'An ƙara ma\'amala cikin nasara',
        'transaction_updated': 'An sabunta ma\'amala cikin nasara',
        'transaction_deleted': 'An share ma\'amala cikin nasara',
        'transaction_not_found': 'Ba a sami ma\'amala ba',
        'create_invoice': 'ƘirƝiri Takardar Jira',
        'edit_invoice': 'Gyara Takardar Jira',
        'invoice_created': 'An ƝirƝiri lissafin kuɗi cikin nasara',
        'invoice_updated': 'An sabunta lissafin kuɗi cikin nasara',
        'invoice_deleted': 'An goge lissafin kuɗi cikin nasara',
        'invoice_not_found': 'Ba a sami lissafin kuɗi ba',
        'core_something_went_wrong': 'Wani abu ya faru ba daidai ba',
        'invalid_date_format': 'Tsarin kwanan wata ba daidai ba ne',
        'invalid_amount': 'Adadin kuɗi ya kamata ya fi sifili',
        'tags_too_long': 'Alamomi ba za su wuce haruffa 200 ba',
        'language_updated': 'An sabunta harshe cikin nasara',
        'invalid_language': 'Harshen da aka zaɓa ba daidai ba ne',
        'feedback_success': 'An gabatar da ra\'ayi cikin nasara',
        'feedback_error': 'Kuskure yayin gabatar da ra\'ayi. Sake gwadawa',
        'invalid_tool': 'An zaɓi kayan aiki mara inganci',
        'invalid_rating': 'An ba da ƙimar da ba ta dace ba',
        'forbidden': 'An hana shiga',
        'page_not_found': 'Ba a sami shafin ba',
        'internal_server_error': 'Kuskuren uwar garken ciki',
        'error_saving': 'Kuskure wajen ajiyar Takardar Jira',
        'something_went_wrong': 'Wani abu ya faru ba daidai ba',
        'invoices': 'Lissafin Kuɗi',
        # Auth
        'invalid_username': 'Sunan mai amfani dole ne ya kasance aƙalla haruffa 3',
        'invalid_password': 'Kalmar sirri dole ne ta kasance aƙalla haruffa 8',
        'user_exists': 'Sunan mai amfani ko imel tuni yana wanzu',
        'signup_success': 'An ƝirƝiri asusu cikin nasara',
        'signup_error': 'Kuskure wajen ƝirƝirar asusu. Sake gwadawa',
        'email_not_found': 'Ba a sami imel ba',
        'reset_email_sent': 'An aika imel na sake saita kalmar sirri. Duba akwatin saƙonka',
        'reset_email_failed': 'An kasa aika imel na sake saita. Sake gwadawa',
        'forgot_password_error': 'Kuskure wajen aiwatar da buƙata. Sake gwadawa',
        'reset_password_subject': 'Buƙatar Sake Saita Kalmar sirri don Ficore Records',
        'reset_password_body': 'Danna hanyar haɗin da ke ƙasa don sake saita kalmar sirri:',
        'reset_password_expiry': 'Wannan hanyar haɗin tana ƙarewa cikin awa 1',
        'password_mismatch': 'Kalmomin sirri ba su daidaita ba',
        'invalid_or_expired_token': 'Alamar sake saita ba ta daidaita ko ta Ɲare',
        'reset_password_success': 'An sake saita kalmar sirri cikin nasara',
        'reset_password_error': 'Kuskure wajen sake saita kalmar sirri. Sake gwadawa',
        'already_have_account': 'Tuni kuna da asusu? Shiga',
        'back_to_signin': 'Koma zuwa Shiga',
        'create_account': 'ƘirƝiri Asusu',
        'forgot_password': 'An manta Kalmar sirri',
        'invalid_credentials': 'Bayanai ba daidai ba',
        'logged_in': 'An shiga cikin nasara',
        'logged_out': 'An fita cikin nasara',
        'new_password': 'Sabuwar Kalmar sirri',
        'reset_password': 'Sake saita Kalmar sirri',
        'user_id': 'ID na Mai amfani',
        'username_exists': 'Sunan mai amfani tuni yana wanzu',
        'email_exists': 'Imel tuni yana wanzu',
        'profile_updated': 'An sabunta bayanan martaba cikin nasara',
        'user_not_found': 'Ba a sami mai amfani ba',
        'invalid_username_format': 'Tsarin sunan mai amfani ba daidai ba ne',
        'invalid_email_domain': 'Domain na imel ba daidai ba ne',
        # General
        'about_description': 'Ficore Records software ne mai sauƙi wanda aka Ɲera don Ɲarfafa Ɲananan da matsakaitan kasuwanci (SMEs) a duk faɗin Afirka tare da ingantaccen adana bayanan kuɗi. Tun daga 2025, mun himmatu wajen sa sarrafa kuɗi ya zama mai sauƙi da fahimta.',
        'about_mission': 'Manufarmu ita ce samar wa SMEs kayan aiki don sauƙaƝe lissafin kuɗi, bin diddigin ma\'amaloli, da sarrafa bayanan martaba, duk yayin da muke kiyaye sauƙi da araha.',
        'choose_option': 'Zaɓi...',
        'comment': 'Sharhi',
        'core_accept': 'Karba',
        'core_back_to_home': 'Koma Gida',
        'core_book_consultancy': 'Yi Ajiyar Shawara',
        'core_disclaimer_records': 'Ficore Records software ne mai sauƙi don SMEs.',
        'core_empowering_financial_management': 'Ƙarfafa adana bayanan kuɗi a duk faɗin Afirka tun 2025',
        'core_error_acknowledging_consent': 'Kuskure wajen yarda da yarda. Sake gwadawa.',
        'core_internal_server_error': 'Kuskuren Cikin Gida',
        'core_invalid_request': 'Neman ba daidai ba ne. Sake gwadawa.',
        'core_join_waitlist': 'Shiga Jerin Jira',
        'core_learn_more': 'Ƙarin bayani',
        'core_network_error': 'Kuskuren hanyar sadarwa. Sake gwadawa.',
        'core_page_not_found': 'Ba a Sami Shafin ba',
        'core_page_not_found_message': 'Shafin da kake nema bai wanzu ba.',
        'core_please_complete_all_fields': 'Don Allah cika duk filayen da ake buƙata daidai',
        'core_return_to_home': 'Koma Gida',
        'core_toggle_navigation': 'Canja Kewayawa',
        'core_welcome_to_records': 'Kula Da Kasuwancinku, Shawara Mai Kyau!',
        'rating': 'Ƙima (1-5)',
        'select_tool': 'Zaɓi Kayan Aiki',
        'submit': 'Aika',
        'welcome': 'Barka da zuwa! Sarrafa kasuwancinku cikin sauƙi.',
        'home': 'Gida',
        'invoices_desc': 'Duba bayanai domin bin diddigin lissafin kuɗi.',
        'transactions_desc': 'Duba rikodin da kuma matsayin ma\'amalolinku.',
        'feedback': 'Ba da Ra\'ayi',
        'feedback_desc': 'Raba ra\'ayoyinka game da app',
        # Dashboard
        'admin_dashboard': 'Dashboard na Admin',
        'admin_dashboard_desc': 'Sarrafa masu amfani da saituna',
        'admin_overview': 'Bayanan Admin',
        'admin_welcome': 'Maraba da zuwa Dashboard na Admin. Sarrafa masu amfani, lissafin kuɗi, da ma\'amaloli a ƙasa.',
        'dashboard_summary': 'Duba lissafin kuɗi na baya-bayan nan, ma\'amaloli, da bayanan martaba a ƙasa.',
        'dashboard_welcome': 'Maraba da zuwa Dashboard naka',
        'invoice': 'Lissafin Kuɗi',
        'recent_invoices': 'Lissafin Kuɗi na Baya-bayan nan',
        'recent_transactions': 'Ma\'amaloli na Baya-bayan nan',
        'total_invoices': 'Jimlar Lissafin Kuɗi',
        'total_transactions': 'Jimlar Ma\'amaloli',
        'total_users': 'Jimlar Masu amfani',
        'transaction': 'Ma\'amala',
        'view_all_invoices': 'Duba Duk Lissafin Kuɗi',
        'view_all_transactions': 'Duba Duk Ma\'amaloli',
        'general_dashboard_desc': 'Duba taƙaitattun bayanai na lamuran ku na kuɗi duka.',
        'create_invoice_desc': 'ƘirƝiri kuma a sarrafa takardun jira na sana\'a da abokan ciniki.',
        'add_transaction_desc': 'Kirkiri rikodin na kuɗaɗen mu\'amala don bin diddigin gudana na kuɗi.',
        # Consent Banner
        'core_consent_banner_records': 'Ta amfani da Ficore Records, ka fahimci cewa muna ba da kayan aiki don shiri kawai, ba banki ba.',
        # Error Handling
        'forbidden_access': 'An hana shiga',
        'database_setup_disabled': 'An kashe saitin bayanai a cikin samarwa',
        # Module: Coins
        'coin_amount': 'Adadin Kuɗin Kama',
        'payment_method': 'Hanyar Biyan Kuɗi',
        'card': 'Katin Kiredit/Debit',
        'bank': 'Canja wurin Banki',
        'purchase': 'Saya',
        'purchase_success': 'An sayi kuɗin kama cikin nasara',
        'coin_balance': 'Ma\'aunin Kuɗin Kama',
        'coin_history': 'Tarihin Ma\'amalar Kuɗin Kama',
        'credit_coins': 'Ƙara Kuɗin Kama',
        'credit_success': 'An ƙara kuɗin kama cikin nasara',
        'date': 'Kwanan Wata',
        'ref': 'Magana',
        'unpaid': 'Ba a Biya ba',
        'part_paid': 'An Biya Wani Ƙarami',
        'paid': 'An Biya',
        'due_date': 'Ranar Biyan Kuɗi',
        'overdue': 'Ya Wuce Lokaci',
        'party_name': 'Sunan Ƙungiya',
        'create_debtor': 'ƘirƝiri Mai Bashi',
        'create_creditor': 'ƘirƝiri Mai Ba da Bashi',
        'debtors': 'Masu Bashi',
        'creditors': 'Masu Ba da Bashi',
        'no_debtors': 'Ba a sami masu bashi ba',
        'no_creditors': 'Ba a sami masu ba da bashi ba',
        'total': 'Jimla',
        'receipts': 'Rasitoci',
        'payments': 'Biyayyu',
        'no_receipts': 'Ba a sami rasitoci ba',
        'no_payments': 'Ba a sami biyayyu ba',
        'add_receipt': 'Ƙara Rasiti',
        'add_payment': 'Ƙara Biyayya',
        'inventory': 'Kaya',
        'add_inventory': 'Ƙara Abun Kaya',
        'edit_inventory': 'Gyara Abun Kaya',
        'no_inventory': 'Ba a sami abubuwan kaya ba',
        'item_name': 'Sunan Abun',
        'quantity': 'Yawan',
        'unit': 'Raka\'a',
        'buying_price': 'Farashin Saya',
        'selling_price': 'Farashin Sayarwa',
        'threshold': 'Matsayin Ƙarancin Kaya',
        'back_to_inventory': 'Koma zuwa Kaya',
        'add_item': 'Ƙara Abun',
        'low_stock': 'Ƙarancin Kaya',
        'yes': 'Eh',
        'no': 'A\'a',
        'user_suspended': 'An dakatar da mai amfani cikin nasara',
        'user_deleted': 'An goge mai amfani cikin nasara',
        'item_deleted': 'An goge abun cikin nasara',
        'invalid_collection': 'Tattara mara inganci'
    }
}

def trans_function(key, default=None):
    """
    Translate a key with optional arguments, handling context safely.
    """
    lang = 'en'
    if has_request_context():
        lang = session.get('lang', 'en')
        if os.getenv('FLASK_ENV', 'development') == 'development':
            logger.debug(f"Requested translation: key='{key}', lang='{lang}'")
    translation = TRANSLATIONS.get(lang, TRANSLATIONS.get('en', {})).get(key, default or key)
    if translation == (default or key) and os.getenv('FLASK_ENV', 'development') == 'development':
        logger.debug(f"Missing translation for key '{key}' in language '{lang}'")
    return translation
